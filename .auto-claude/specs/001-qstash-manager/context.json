{
  "task_description": "Build qstash-manager: a standalone NPM CLI tool for comprehensive QStash resource management",
  "scoped_services": ["qstash-manager"],
  "files_to_modify": {
    "qstash-manager": []
  },
  "files_to_create": {
    "qstash-manager": [
      "package.json",
      "tsconfig.json",
      "tsup.config.ts",
      "vitest.config.ts",
      ".eslintrc.json",
      ".gitignore",
      ".npmignore",
      "src/index.ts",
      "src/commands/index.ts",
      "src/commands/url-groups/index.ts",
      "src/commands/url-groups/list.ts",
      "src/commands/url-groups/create.ts",
      "src/commands/url-groups/manage.ts",
      "src/commands/url-groups/quick-update.ts",
      "src/commands/messages/index.ts",
      "src/commands/messages/send.ts",
      "src/commands/messages/track.ts",
      "src/commands/messages/cancel.ts",
      "src/commands/queues/index.ts",
      "src/commands/schedules/index.ts",
      "src/commands/dlq/index.ts",
      "src/commands/logs/index.ts",
      "src/commands/security/index.ts",
      "src/commands/config/index.ts",
      "src/commands/config/setup.ts",
      "src/lib/qstash/client.ts",
      "src/lib/qstash/errors.ts",
      "src/lib/qstash/types.ts",
      "src/lib/config/manager.ts",
      "src/lib/config/types.ts",
      "src/lib/ui/prompts.ts",
      "src/lib/ui/tables.ts",
      "src/lib/ui/colors.ts",
      "src/lib/ui/formatters.ts",
      "src/lib/utils/validation.ts",
      "src/lib/utils/time.ts",
      "src/types/qstash.ts",
      "src/types/config.ts",
      "src/types/commands.ts",
      "tests/unit/config.test.ts",
      "tests/unit/client.test.ts",
      "tests/unit/validation.test.ts",
      "tests/integration/url-groups.test.ts",
      "tests/e2e/first-run.test.ts"
    ]
  },
  "files_to_reference": [
    {
      "path": "/Users/daniel/development/prefix/src/cli/commands/qstash-url-groups.ts",
      "patterns": [
        "Interactive menu pattern with continuous navigation loop",
        "@clack/prompts usage (intro, outro, note, select, confirm, text, spinner)",
        "Type-safe menu actions using TypeScript union types",
        "URL validation with HTTPS requirement",
        "Error handling that translates API codes to user messages",
        "Table rendering with cli-table3",
        "Never-force-exit navigation pattern"
      ]
    },
    {
      "path": "/Users/daniel/development/qstash-manager-project/DESIGN.md",
      "patterns": [
        "Complete project structure",
        "NPM package configuration (package.json, tsconfig, tsup)",
        "Config file structure (~/.qstash-manager/config.json)",
        "Token resolution priority",
        "Interactive-first UX principles",
        "Testing strategy"
      ]
    }
  ],
  "patterns": {
    "interactive_menu": "Use continuous while loop with shouldContinue flag, always include back/exit options",
    "prompts": "Wrap @clack/prompts functions, always check isCancel() to prevent crashes",
    "url_validation": "Require HTTPS, suggest ngrok for local development",
    "error_handling": "Translate 401/404/429 API errors to actionable user messages",
    "navigation": "Never force exit - Ctrl+C/ESC goes back one level",
    "spinners": "Always use spinner for async operations with descriptive messages",
    "tables": "Use cli-table3 with consistent column formatting"
  },
  "existing_implementations": {
    "description": "Reference implementation exists in Prefix project for URL groups CLI",
    "relevant_files": ["/Users/daniel/development/prefix/src/cli/commands/qstash-url-groups.ts"],
    "what_to_copy": "Interactive patterns, error handling, URL validation logic",
    "what_to_remove": "BaseCommand class, internal logger, Prisma dependencies"
  },
  "constraints": {
    "https_only": "QStash requires HTTPS URLs for all endpoints",
    "token_security": "Never log or commit tokens, store in ~/.qstash-manager/config.json",
    "node_version": ">=18.0.0 required for Commander.js v12",
    "interactive_first": "CLI flags are shortcuts, not primary interface",
    "package_size": "Target <5MB for fast npx execution",
    "startup_time": "Target <1 second"
  },
  "created_at": "2026-01-13T15:45:00.000Z"
}
